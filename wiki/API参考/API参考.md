# API参考

<cite>
**本文档引用的文件**
- [JdbcDriver.java](file://lealone-client/src/main/java/com/lealone/client/jdbc/JdbcDriver.java)
- [JdbcConnection.java](file://lealone-client/src/main/java/com/lealone/client/jdbc/JdbcConnection.java)
- [JdbcStatement.java](file://lealone-client/src/main/java/com/lealone/client/jdbc/JdbcStatement.java)
- [JdbcPreparedStatement.java](file://lealone-client/src/main/java/com/lealone/client/jdbc/JdbcPreparedStatement.java)
- [JdbcResultSet.java](file://lealone-client/src/main/java/com/lealone/client/jdbc/JdbcResultSet.java)
- [JdbcDatabaseMetaData.java](file://lealone-client/src/main/java/com/lealone/client/jdbc/JdbcDatabaseMetaData.java)
- [JdbcCallableStatement.java](file://lealone-client/src/main/java/com/lealone/client/jdbc/JdbcCallableStatement.java)
- [Database.java](file://lealone-db/src/main/java/com/lealone/db/Database.java)
- [LealoneDatabase.java](file://lealone-db/src/main/java/com/lealone/db/LealoneDatabase.java)
</cite>

## 目录
1. [JDBC API](#jdbc-api)
2. [核心Java API](#核心java-api)

## JDBC API

本节详细记录Lealone的JDBC API，涵盖驱动、连接、语句、结果集等核心接口。

### JdbcDriver

`JdbcDriver`是Lealone数据库的JDBC驱动程序，实现了`java.sql.Driver`接口。

**方法**

- **connect(String url, Properties info)**
  - **功能**: 建立数据库连接。
  - **参数**: 
    - `url`: 数据库URL
    - `info`: 连接属性
  - **返回值**: 新的连接对象，如果URL不被支持则返回null
  - **异常**: `SQLException`

- **acceptsURL(String url)**
  - **功能**: 检查驱动程序是否理解此URL。
  - **参数**: 
    - `url`: 数据库URL
  - **返回值**: 如果驱动程序理解URL则返回true
  - **异常**: 无

- **getMajorVersion()**
  - **功能**: 获取驱动程序的主版本号。
  - **返回值**: 主版本号
  - **异常**: 无

- **getMinorVersion()**
  - **功能**: 获取驱动程序的次版本号。
  - **返回值**: 次版本号
  - **异常**: 无

- **getPropertyInfo(String url, Properties info)**
  - **功能**: 获取受支持的属性列表。
  - **参数**: 
    - `url`: 数据库URL
    - `info`: 连接属性
  - **返回值**: 零长度数组
  - **异常**: 无

- **jdbcCompliant()**
  - **功能**: 检查此驱动程序是否符合JDBC规范。
  - **返回值**: true
  - **异常**: 无

- **getParentLogger()**
  - **功能**: [不支持]
  - **返回值**: 抛出`SQLFeatureNotSupportedException`
  - **异常**: `SQLFeatureNotSupportedException`

- **load()**
  - **功能**: 加载驱动程序。
  - **返回值**: `JdbcDriver`实例
  - **异常**: 无

- **unload()**
  - **功能**: 卸载驱动程序。
  - **返回值**: void
  - **异常**: 无

- **getConnection(String url)**
  - **功能**: 获取数据库连接。
  - **参数**: 
    - `url`: 数据库URL
  - **返回值**: `Future<JdbcConnection>`对象
  - **异常**: 无

- **getConnection(String url, String user, String password)**
  - **功能**: 使用用户名和密码获取数据库连接。
  - **参数**: 
    - `url`: 数据库URL
    - `user`: 用户名
    - `password`: 密码
  - **返回值**: `Future<JdbcConnection>`对象
  - **异常**: 无

- **getConnection(String url, Properties info)**
  - **功能**: 使用连接属性获取数据库连接。
  - **参数**: 
    - `url`: 数据库URL
    - `info`: 连接属性
  - **返回值**: `Future<JdbcConnection>`对象
  - **异常**: 无

- **getConnection(ConnectionInfo ci)**
  - **功能**: 使用连接信息获取数据库连接。
  - **参数**: 
    - `ci`: 连接信息对象
  - **返回值**: `Future<JdbcConnection>`对象
  - **异常**: 无

**Section sources**
- [JdbcDriver.java](file://lealone-client/src/main/java/com/lealone/client/jdbc/JdbcDriver.java#L1-L198)

### JdbcConnection

`JdbcConnection`表示与数据库的连接（会话），实现了`java.sql.Connection`接口。

**方法**

- **createStatement()**
  - **功能**: 创建新的语句。
  - **返回值**: 新的语句对象
  - **异常**: `SQLException`

- **createStatement(int resultSetType, int resultSetConcurrency)**
  - **功能**: 创建具有指定结果集类型和并发性的语句。
  - **参数**: 
    - `resultSetType`: 结果集类型 (ResultSet.TYPE_*)
    - `resultSetConcurrency`: 并发性 (ResultSet.CONCUR_*)
  - **返回值**: 语句对象
  - **异常**: `SQLException`

- **createStatement(int resultSetType, int resultSetConcurrency, int resultSetHoldability)**
  - **功能**: 创建具有指定结果集类型、并发性和可保持性的语句。
  - **参数**: 
    - `resultSetType`: 结果集类型 (ResultSet.TYPE_*)
    - `resultSetConcurrency`: 并发性 (ResultSet.CONCUR_*)
    - `resultSetHoldability`: 可保持性 (ResultSet.HOLD* / CLOSE*)
  - **返回值**: 语句对象
  - **异常**: `SQLException`

- **prepareStatement(String sql)**
  - **功能**: 创建新的预编译语句。
  - **参数**: 
    - `sql`: SQL语句
  - **返回值**: 预编译语句对象
  - **异常**: `SQLException`

- **prepareStatement(String sql, int resultSetType, int resultSetConcurrency)**
  - **功能**: 创建具有指定结果集类型和并发性的预编译语句。
  - **参数**: 
    - `sql`: SQL语句
    - `resultSetType`: 结果集类型 (ResultSet.TYPE_*)
    - `resultSetConcurrency`: 并发性 (ResultSet.CONCUR_*)
  - **返回值**: 预编译语句对象
  - **异常**: `SQLException`

- **prepareStatement(String sql, int resultSetType, int resultSetConcurrency, int resultSetHoldability)**
  - **功能**: 创建具有指定结果集类型、并发性和可保持性的预编译语句。
  - **参数**: 
    - `sql`: SQL语句
    - `resultSetType`: 结果集类型 (ResultSet.TYPE_*)
    - `resultSetConcurrency`: 并发性 (ResultSet.CONCUR_*)
    - `resultSetHoldability`: 可保持性 (ResultSet.HOLD* / CLOSE*)
  - **返回值**: 预编译语句对象
  - **异常**: `SQLException`

- **prepareStatement(String sql, int autoGeneratedKeys)**
  - **功能**: 创建新的预编译语句。此方法内部调用`prepareStatement(String sql)`。
  - **参数**: 
    - `sql`: SQL语句
    - `autoGeneratedKeys`: 忽略
  - **返回值**: 预编译语句对象
  - **异常**: `SQLException`

- **prepareStatement(String sql, int[] columnIndexes)**
  - **功能**: 创建新的预编译语句。此方法内部调用`prepareStatement(String sql)`。
  - **参数**: 
    - `sql`: SQL语句
    - `columnIndexes`: 忽略
  - **返回值**: 预编译语句对象
  - **异常**: `SQLException`

- **prepareStatement(String sql, String[] columnNames)**
  - **功能**: 创建新的预编译语句。此方法内部调用`prepareStatement(String sql)`。
  - **参数**: 
    - `sql`: SQL语句
    - `columnNames`: 忽略
  - **返回值**: 预编译语句对象
  - **异常**: `SQLException`

- **getMetaData()**
  - **功能**: 获取此数据库的元数据。
  - **返回值**: 数据库元数据对象
  - **异常**: `SQLException`

- **close()**
  - **功能**: 关闭此连接。在此调用后，由该连接创建的所有打开的语句、预编译语句和结果集都将失效。如果有未提交的事务，它将被回滚。
  - **返回值**: void
  - **异常**: `SQLException`

- **setAutoCommit(boolean autoCommit)**
  - **功能**: 开启或关闭自动提交。启用它会提交未提交的事务（如果存在）。
  - **参数**: 
    - `autoCommit`: true表示自动提交开启，false表示关闭
  - **返回值**: void
  - **异常**: `SQLException`

- **getAutoCommit()**
  - **功能**: 获取当前的自动提交设置。
  - **返回值**: true表示开启，false表示关闭
  - **异常**: `SQLException`

- **commit()**
  - **功能**: 提交当前事务。如果自动提交关闭，此调用才有效。
  - **返回值**: void
  - **异常**: `SQLException`

- **commitAsync()**
  - **功能**: 异步提交当前事务。
  - **返回值**: `Future<Boolean>`对象
  - **异常**: 无

- **rollback()**
  - **功能**: 回滚当前事务。如果自动提交关闭，此调用才有效。
  - **返回值**: void
  - **异常**: `SQLException`

- **rollbackAsync()**
  - **功能**: 异步回滚当前事务。
  - **返回值**: `Future<Boolean>`对象
  - **异常**: 无

- **isClosed()**
  - **功能**: 检查此连接是否已关闭。
  - **返回值**: 如果已调用close则返回true
  - **异常**: `SQLException`

- **nativeSQL(String sql)**
  - **功能**: 将SQL语句转换为数据库语法。
  - **参数**: 
    - `sql`: 带或不带JDBC转义序列的SQL语句
  - **返回值**: 转换后的语句
  - **异常**: `SQLException`

- **setReadOnly(boolean readOnly)**
  - **功能**: [忽略] 根据JDBC规范，此设置仅是数据库优化的提示，并不禁止写入。
  - **参数**: 
    - `readOnly`: 忽略
  - **返回值**: void
  - **异常**: `SQLException`

- **isReadOnly()**
  - **功能**: 返回数据库是否为只读。
  - **返回值**: 如果数据库为只读则返回true
  - **异常**: `SQLException`

- **setCatalog(String catalog)**
  - **功能**: 设置默认目录名。此调用被忽略。
  - **参数**: 
    - `catalog`: 忽略
  - **返回值**: void
  - **异常**: `SQLException`

- **getCatalog()**
  - **功能**: 获取当前目录名。
  - **返回值**: 目录名
  - **异常**: `SQLException`

- **getWarnings()**
  - **功能**: 获取此对象调用报告的第一个警告。
  - **返回值**: null
  - **异常**: `SQLException`

- **clearWarnings()**
  - **功能**: 清除所有警告。
  - **返回值**: void
  - **异常**: `SQLException`

- **setTransactionIsolation(int level)**
  - **功能**: 更改当前事务隔离级别。调用此方法将提交打开的事务，即使新级别与旧级别相同，除非级别不受支持。
  - **参数**: 
    - `level`: 新的事务隔离级别: Connection.TRANSACTION_READ_UNCOMMITTED, Connection.TRANSACTION_READ_COMMITTED, Connection.TRANSACTION_REPEATABLE_READ, 或 Connection.TRANSACTION_SERIALIZABLE
  - **返回值**: void
  - **异常**: `SQLException`

- **getTransactionIsolation()**
  - **功能**: 返回当前事务隔离级别。
  - **返回值**: 隔离级别
  - **异常**: `SQLException`

- **setQueryTimeout(int seconds)**
  - **功能**: 设置查询超时时间。
  - **参数**: 
    - `seconds`: 秒数
  - **返回值**: void
  - **异常**: `SQLException`

- **getQueryTimeout()**
  - **功能**: 获取查询超时时间。
  - **返回值**: 秒数
  - **异常**: `SQLException`

**Section sources**
- [JdbcConnection.java](file://lealone-client/src/main/java/com/lealone/client/jdbc/JdbcConnection.java#L1-L800)

### JdbcStatement

`JdbcStatement`表示一个语句，实现了`java.sql.Statement`接口。

**方法**

- **executeQuery(String sql)**
  - **功能**: 执行查询（select语句）并返回结果集。如果此语句存在另一个结果集，即使此语句失败，它也将被关闭。
  - **参数**: 
    - `sql`: 要执行的SQL语句
  - **返回值**: 结果集
  - **异常**: `SQLException`

- **executeQueryAsync(String sql)**
  - **功能**: 异步执行查询（select语句）并返回结果集。
  - **参数**: 
    - `sql`: 要执行的SQL语句
  - **返回值**: `Future<ResultSet>`对象
  - **异常**: 无

- **executeUpdate(String sql)**
  - **功能**: 执行语句（insert, update, delete, create, drop）并返回更新计数。如果此语句存在另一个结果集，即使此语句失败，它也将被关闭。
  - **参数**: 
    - `sql`: SQL语句
  - **返回值**: 更新计数（insert, update或delete影响的行数，如果无行或语句为create, drop, commit或rollback则为0）
  - **异常**: `SQLException`

- **executeUpdateAsync(String sql)**
  - **功能**: 异步执行语句（insert, update, delete, create, drop）并返回更新计数。
  - **参数**: 
    - `sql`: SQL语句
  - **返回值**: `Future<Integer>`对象
  - **异常**: 无

- **execute(String sql)**
  - **功能**: 执行任意语句。如果此语句存在另一个结果集，即使此语句失败，它也将被关闭。
  - **参数**: 
    - `sql`: 要执行的SQL语句
  - **返回值**: 如果有结果集可用则返回true，否则返回false
  - **异常**: `SQLException`

- **addBatch(String sql)**
  - **功能**: 将语句添加到批处理中。
  - **参数**: 
    - `sql`: SQL语句
  - **返回值**: void
  - **异常**: `SQLException`

- **clearBatch()**
  - **功能**: 清除批处理。
  - **返回值**: void
  - **异常**: `SQLException`

- **executeBatch()**
  - **功能**: 执行批处理。如果批处理中的某个语句失败，数据库将继续执行。
  - **返回值**: 更新计数数组
  - **异常**: `SQLException`

- **close()**
  - **功能**: 关闭此语句。在此调用后，由该语句创建的所有结果集都将失效。
  - **返回值**: void
  - **异常**: `SQLException`

- **isClosed()**
  - **功能**: 返回此语句是否已关闭。
  - **返回值**: 如果语句已关闭则返回true
  - **异常**: `SQLException`

- **getConnection()**
  - **功能**: 返回创建此对象的连接。
  - **返回值**: 连接
  - **异常**: 无

- **getWarnings()**
  - **功能**: 获取此对象调用报告的第一个警告。此驱动程序不支持警告，将始终返回null。
  - **返回值**: null
  - **异常**: `SQLException`

- **clearWarnings()**
  - **功能**: 清除所有警告。由于此驱动程序不支持警告，此调用被忽略。
  - **返回值**: void
  - **异常**: `SQLException`

- **setCursorName(String name)**
  - **功能**: 设置游标名。此调用被忽略。
  - **参数**: 
    - `name`: 忽略
  - **返回值**: void
  - **异常**: `SQLException`

- **setFetchDirection(int direction)**
  - **功能**: 设置获取方向。此驱动程序忽略此调用。
  - **参数**: 
    - `direction`: 忽略
  - **返回值**: void
  - **异常**: `SQLException`

- **getFetchDirection()**
  - **功能**: 获取获取方向。
  - **返回值**: FETCH_FORWARD
  - **异常**: `SQLException`

- **getMaxRows()**
  - **功能**: 获取结果集的最大行数。
  - **返回值**: 行数，0表示无限制
  - **异常**: `SQLException`

- **setMaxRows(int maxRows)**
  - **功能**: 设置结果集的最大行数。
  - **参数**: 
    - `maxRows`: 行数，0表示无限制
  - **返回值**: void
  - **异常**: `SQLException`

- **setFetchSize(int rows)**
  - **功能**: 设置建议一次读取的行数。
  - **参数**: 
    - `rows`: 行数
  - **返回值**: void
  - **异常**: `SQLException`

- **getFetchSize()**
  - **功能**: 获取建议一次读取的行数。
  - **返回值**: 当前获取大小
  - **异常**: `SQLException`

- **getResultSetConcurrency()**
  - **功能**: 获取由此对象创建的结果集并发性。
  - **返回值**: 并发性
  - **异常**: `SQLException`

- **getResultSetHoldability()**
  - **功能**: 获取结果集可保持性。
  - **返回值**: 可保持性
  - **异常**: `SQLException`

- **getResultSetType()**
  - **功能**: 获取结果集类型。
  - **返回值**: 类型
  - **异常**: `SQLException`

- **getMaxFieldSize()**
  - **功能**: 获取结果集列的最大字节数。
  - **返回值**: 始终为0表示无限制
  - **异常**: `SQLException`

**Section sources**
- [JdbcStatement.java](file://lealone-client/src/main/java/com/lealone/client/jdbc/JdbcStatement.java#L1-L800)

### JdbcPreparedStatement

`JdbcPreparedStatement`表示一个预编译语句，继承自`JdbcStatement`并实现了`java.sql.PreparedStatement`接口。

**方法**

- **executeQuery()**
  - **功能**: 执行查询（select语句）并返回结果集。如果此语句存在另一个结果集，即使此语句失败，它也将被关闭。
  - **返回值**: 结果集
  - **异常**: `SQLException`

- **executeQueryAsync()**
  - **功能**: 异步执行查询（select语句）并返回结果集。
  - **返回值**: `Future<ResultSet>`对象
  - **异常**: 无

- **executeUpdate()**
  - **功能**: 执行语句（insert, update, delete, create, drop）并返回更新计数。如果此语句存在另一个结果集，即使此语句失败，它也将被关闭。
  - **返回值**: 更新计数（insert, update或delete影响的行数，如果无行或语句为create, drop, commit或rollback则为0）
  - **异常**: `SQLException`

- **executeUpdateAsync()**
  - **功能**: 异步执行语句（insert, update, delete, create, drop）并返回更新计数。
  - **返回值**: `Future<Integer>`对象
  - **异常**: 无

- **execute()**
  - **功能**: 执行任意语句。如果此语句存在另一个结果集，即使此语句失败，它也将被关闭。
  - **返回值**: 如果有结果集可用则返回true，否则返回false
  - **异常**: `SQLException`

- **executeBatch()**
  - **功能**: 执行批处理。如果批处理中的某个语句失败，数据库将继续执行。
  - **返回值**: 更新计数数组
  - **异常**: `SQLException`

- **addBatch()**
  - **功能**: 将当前设置添加到批处理中。
  - **返回值**: void
  - **异常**: `SQLException`

- **addBatch(String sql)**
  - **功能**: 在`PreparedStatement`上调用此方法不合法。
  - **参数**: 
    - `sql`: 忽略
  - **返回值**: void
  - **异常**: `SQLException`

- **clearBatch()**
  - **功能**: 清除批处理。
  - **返回值**: void
  - **异常**: `SQLException`

- **clearParameters()**
  - **功能**: 清除所有参数。
  - **返回值**: void
  - **异常**: `SQLException`

- **close()**
  - **功能**: 关闭此语句。在此调用后，由该语句创建的所有结果集都将失效。
  - **返回值**: void
  - **异常**: `SQLException`

- **setNull(int parameterIndex, int sqlType)**
  - **功能**: 将参数设置为null。
  - **参数**: 
    - `parameterIndex`: 参数索引 (1, 2, ...)
    - `sqlType`: 数据类型 (Types.x)
  - **返回值**: void
  - **异常**: `SQLException`

- **setInt(int parameterIndex, int x)**
  - **功能**: 设置参数值。
  - **参数**: 
    - `parameterIndex`: 参数索引 (1, 2, ...)
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **setString(int parameterIndex, String x)**
  - **功能**: 设置参数值。
  - **参数**: 
    - `parameterIndex`: 参数索引 (1, 2, ...)
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **setBigDecimal(int parameterIndex, BigDecimal x)**
  - **功能**: 设置参数值。
  - **参数**: 
    - `parameterIndex`: 参数索引 (1, 2, ...)
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **setDate(int parameterIndex, java.sql.Date x)**
  - **功能**: 设置参数值。
  - **参数**: 
    - `parameterIndex`: 参数索引 (1, 2, ...)
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **setTime(int parameterIndex, java.sql.Time x)**
  - **功能**: 设置参数值。
  - **参数**: 
    - `parameterIndex`: 参数索引 (1, 2, ...)
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **setTimestamp(int parameterIndex, java.sql.Timestamp x)**
  - **功能**: 设置参数值。
  - **参数**: 
    - `parameterIndex`: 参数索引 (1, 2, ...)
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **setObject(int parameterIndex, Object x)**
  - **功能**: 设置参数值。未知类的对象在客户端序列化。
  - **参数**: 
    - `parameterIndex`: 参数索引 (1, 2, ...)
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **setObject(int parameterIndex, Object x, int targetSqlType)**
  - **功能**: 设置参数值。对象在发送到数据库之前根据指定的数据类型进行转换。未知类的对象在客户端序列化。
  - **参数**: 
    - `parameterIndex`: 参数索引 (1, 2, ...)
    - `x`: 值，允许为null
    - `targetSqlType`: 定义在java.sql.Types中的类型
  - **返回值**: void
  - **异常**: `SQLException`

- **setObject(int parameterIndex, Object x, int targetSqlType, int scale)**
  - **功能**: 设置参数值。对象在发送到数据库之前根据指定的数据类型进行转换。未知类的对象在客户端序列化。
  - **参数**: 
    - `parameterIndex`: 参数索引 (1, 2, ...)
    - `x`: 值，允许为null
    - `targetSqlType`: 定义在java.sql.Types中的类型
    - `scale`: 被忽略
  - **返回值**: void
  - **异常**: `SQLException`

- **setBoolean(int parameterIndex, boolean x)**
  - **功能**: 设置参数值。
  - **参数**: 
    - `parameterIndex`: 参数索引 (1, 2, ...)
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **setByte(int parameterIndex, byte x)**
  - **功能**: 设置参数值。
  - **参数**: 
    - `parameterIndex`: 参数索引 (1, 2, ...)
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **setShort(int parameterIndex, short x)**
  - **功能**: 设置参数值。
  - **参数**: 
    - `parameterIndex`: 参数索引 (1, 2, ...)
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **setLong(int parameterIndex, long x)**
  - **功能**: 设置参数值。
  - **参数**: 
    - `parameterIndex`: 参数索引 (1, 2, ...)
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **setFloat(int parameterIndex, float x)**
  - **功能**: 设置参数值。
  - **参数**: 
    - `parameterIndex`: 参数索引 (1, 2, ...)
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **setDouble(int parameterIndex, double x)**
  - **功能**: 设置参数值。
  - **参数**: 
    - `parameterIndex`: 参数索引 (1, 2, ...)
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **setFetchSize(int rows)**
  - **功能**: 设置获取大小。
  - **参数**: 
    - `rows`: 行数
  - **返回值**: void
  - **异常**: `SQLException`

**Section sources**
- [JdbcPreparedStatement.java](file://lealone-client/src/main/java/com/lealone/client/jdbc/JdbcPreparedStatement.java#L1-L1519)

### JdbcResultSet

`JdbcResultSet`表示一个结果集，实现了`java.sql.ResultSet`接口。

**方法**

- **next()**
  - **功能**: 将游标移动到结果集的下一行。
  - **返回值**: 如果成功则返回true，如果没有更多行则返回false
  - **异常**: `SQLException`

- **getMetaData()**
  - **功能**: 获取此结果集的元数据。
  - **返回值**: 元数据
  - **异常**: `SQLException`

- **wasNull()**
  - **功能**: 返回上次访问的列是否为null。
  - **返回值**: 如果上次访问的列为null则返回true
  - **异常**: `SQLException`

- **findColumn(String columnLabel)**
  - **功能**: 在结果集中搜索特定列。进行不区分大小写的搜索。
  - **参数**: 
    - `columnLabel`: 列标签
  - **返回值**: 列索引 (1,2,...)
  - **异常**: `SQLException`

- **close()**
  - **功能**: 关闭结果集。
  - **返回值**: void
  - **异常**: `SQLException`

- **getStatement()**
  - **功能**: 返回创建此对象的语句。
  - **返回值**: 语句或预编译语句，如果由`DatabaseMetaData`调用创建则返回null
  - **异常**: `SQLException`

- **getWarnings()**
  - **功能**: 获取此对象调用报告的第一个警告。
  - **返回值**: null
  - **异常**: `SQLException`

- **clearWarnings()**
  - **功能**: 清除所有警告。
  - **返回值**: void
  - **异常**: `SQLException`

- **getString(int columnIndex)**
  - **功能**: 返回指定列的值作为字符串。
  - **参数**: 
    - `columnIndex`: (1,2,...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getString(String columnLabel)**
  - **功能**: 返回指定列的值作为字符串。
  - **参数**: 
    - `columnLabel`: 列标签
  - **返回值**: 值
  - **异常**: `SQLException`

- **getInt(int columnIndex)**
  - **功能**: 返回指定列的值作为整数。
  - **参数**: 
    - `columnIndex`: (1,2,...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getInt(String columnLabel)**
  - **功能**: 返回指定列的值作为整数。
  - **参数**: 
    - `columnLabel`: 列标签
  - **返回值**: 值
  - **异常**: `SQLException`

- **getBigDecimal(int columnIndex)**
  - **功能**: 返回指定列的值作为BigDecimal。
  - **参数**: 
    - `columnIndex`: (1,2,...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getDate(int columnIndex)**
  - **功能**: 返回指定列的值作为java.sql.Date。
  - **参数**: 
    - `columnIndex`: (1,2,...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getTime(int columnIndex)**
  - **功能**: 返回指定列的值作为java.sql.Time。
  - **参数**: 
    - `columnIndex`: (1,2,...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getTimestamp(int columnIndex)**
  - **功能**: 返回指定列的值作为java.sql.Timestamp。
  - **参数**: 
    - `columnIndex`: (1,2,...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getObject(int columnIndex)**
  - **功能**: 将列值作为Java对象返回。数据在客户端反序列化为Java对象。
  - **参数**: 
    - `columnIndex`: (1,2,...)
  - **返回值**: 值或null
  - **异常**: `SQLException`

- **getObject(String columnLabel)**
  - **功能**: 将列值作为Java对象返回。数据在客户端反序列化为Java对象。
  - **参数**: 
    - `columnLabel`: 列标签
  - **返回值**: 值或null
  - **异常**: `SQLException`

- **getBoolean(int columnIndex)**
  - **功能**: 返回指定列的值作为布尔值。
  - **参数**: 
    - `columnIndex`: (1,2,...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getBoolean(String columnLabel)**
  - **功能**: 返回指定列的值作为布尔值。
  - **参数**: 
    - `columnLabel`: 列标签
  - **返回值**: 值
  - **异常**: `SQLException`

- **getByte(int columnIndex)**
  - **功能**: 返回指定列的值作为字节。
  - **参数**: 
    - `columnIndex`: (1,2,...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getByte(String columnLabel)**
  - **功能**: 返回指定列的值作为字节。
  - **参数**: 
    - `columnLabel`: 列标签
  - **返回值**: 值
  - **异常**: `SQLException`

- **getShort(int columnIndex)**
  - **功能**: 返回指定列的值作为短整型。
  - **参数**: 
    - `columnIndex`: (1,2,...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getShort(String columnLabel)**
  - **功能**: 返回指定列的值作为短整型。
  - **参数**: 
    - `columnLabel`: 列标签
  - **返回值**: 值
  - **异常**: `SQLException`

- **getLong(int columnIndex)**
  - **功能**: 返回指定列的值作为长整型。
  - **参数**: 
    - `columnIndex`: (1,2,...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getLong(String columnLabel)**
  - **功能**: 返回指定列的值作为长整型。
  - **参数**: 
    - `columnLabel`: 列标签
  - **返回值**: 值
  - **异常**: `SQLException`

- **getFloat(int columnIndex)**
  - **功能**: 返回指定列的值作为浮点数。
  - **参数**: 
    - `columnIndex`: (1,2,...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getFloat(String columnLabel)**
  - **功能**: 返回指定列的值作为浮点数。
  - **参数**: 
    - `columnLabel`: 列标签
  - **返回值**: 值
  - **异常**: `SQLException`

- **getDouble(int columnIndex)**
  - **功能**: 返回指定列的值作为双精度浮点数。
  - **参数**: 
    - `columnIndex`: (1,2,...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getDouble(String columnLabel)**
  - **功能**: 返回指定列的值作为双精度浮点数。
  - **参数**: 
    - `columnLabel`: 列标签
  - **返回值**: 值
  - **异常**: `SQLException`

- **getBigDecimal(String columnLabel, int scale)**
  - **功能**: 返回指定列的值作为BigDecimal。
  - **参数**: 
    - `columnLabel`: 列标签
    - `scale`: 返回值的精度
  - **返回值**: 值
  - **异常**: `SQLException`

- **getBigDecimal(int columnIndex, int scale)**
  - **功能**: 返回指定列的值作为BigDecimal。
  - **参数**: 
    - `columnIndex`: (1,2,...)
    - `scale`: 返回值的精度
  - **返回值**: 值
  - **异常**: `SQLException`

- **getBytes(int columnIndex)**
  - **功能**: 返回指定列的值作为字节数组。
  - **参数**: 
    - `columnIndex`: (1,2,...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getBytes(String columnLabel)**
  - **功能**: 返回指定列的值作为字节数组。
  - **参数**: 
    - `columnLabel`: 列标签
  - **返回值**: 值
  - **异常**: `SQLException`

- **getBinaryStream(int columnIndex)**
  - **功能**: 返回指定列的值作为输入流。
  - **参数**: 
    - `columnIndex`: (1,2,...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getBinaryStream(String columnLabel)**
  - **功能**: 返回指定列的值作为输入流。
  - **参数**: 
    - `columnLabel`: 列标签
  - **返回值**: 值
  - **异常**: `SQLException`

- **getClob(int columnIndex)**
  - **功能**: 返回指定列的值作为Clob。
  - **参数**: 
    - `columnIndex`: (1,2,...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getClob(String columnLabel)**
  - **功能**: 返回指定列的值作为Clob。
  - **参数**: 
    - `columnLabel`: 列标签
  - **返回值**: 值
  - **异常**: `SQLException`

- **getArray(int columnIndex)**
  - **功能**: 返回指定列的值作为Array。
  - **参数**: 
    - `columnIndex`: (1,2,...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getArray(String columnLabel)**
  - **功能**: 返回指定列的值作为Array。
  - **参数**: 
    - `columnLabel`: 列标签
  - **返回值**: 值
  - **异常**: `SQLException`

- **getAsciiStream(int columnIndex)**
  - **功能**: 返回指定列的值作为ASCII流。
  - **参数**: 
    - `columnIndex`: (1,2,...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getAsciiStream(String columnLabel)**
  - **功能**: 返回指定列的值作为ASCII流。
  - **参数**: 
    - `columnLabel`: 列标签
  - **返回值**: 值
  - **异常**: `SQLException`

- **getCharacterStream(int columnIndex)**
  - **功能**: 返回指定列的值作为字符流。
  - **参数**: 
    - `columnIndex`: (1,2,...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getCharacterStream(String columnLabel)**
  - **功能**: 返回指定列的值作为字符流。
  - **参数**: 
    - `columnLabel`: 列标签
  - **返回值**: 值
  - **异常**: `SQLException`

- **getURL(int columnIndex)**
  - **功能**: [不支持]
  - **参数**: 
    - `columnIndex`: (1,2,...)
  - **返回值**: 抛出`SQLException`
  - **异常**: `SQLException`

- **getURL(String columnLabel)**
  - **功能**: [不支持]
  - **参数**: 
    - `columnLabel`: 列标签
  - **返回值**: 抛出`SQLException`
  - **异常**: `SQLException`

- **updateNull(int columnIndex)**
  - **功能**: 更新当前行或插入行中的列。
  - **参数**: 
    - `columnIndex`: (1,2,...)
  - **返回值**: void
  - **异常**: `SQLException`

- **updateNull(String columnLabel)**
  - **功能**: 更新当前行或插入行中的列。
  - **参数**: 
    - `columnLabel`: 列标签
  - **返回值**: void
  - **异常**: `SQLException`

- **updateBoolean(int columnIndex, boolean x)**
  - **功能**: 更新当前行或插入行中的列。
  - **参数**: 
    - `columnIndex`: (1,2,...)
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **updateBoolean(String columnLabel, boolean x)**
  - **功能**: 更新当前行或插入行中的列。
  - **参数**: 
    - `columnLabel`: 列标签
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **updateByte(int columnIndex, byte x)**
  - **功能**: 更新当前行或插入行中的列。
  - **参数**: 
    - `columnIndex`: (1,2,...)
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **updateByte(String columnLabel, byte x)**
  - **功能**: 更新当前行或插入行中的列。
  - **参数**: 
    - `columnLabel`: 列标签
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **updateBytes(int columnIndex, byte[] x)**
  - **功能**: 更新当前行或插入行中的列。
  - **参数**: 
    - `columnIndex`: (1,2,...)
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **updateBytes(String columnLabel, byte[] x)**
  - **功能**: 更新当前行或插入行中的列。
  - **参数**: 
    - `columnLabel`: 列标签
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **updateShort(int columnIndex, short x)**
  - **功能**: 更新当前行或插入行中的列。
  - **参数**: 
    - `columnIndex`: (1,2,...)
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **updateShort(String columnLabel, short x)**
  - **功能**: 更新当前行或插入行中的列。
  - **参数**: 
    - `columnLabel`: 列标签
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **updateInt(int columnIndex, int x)**
  - **功能**: 更新当前行或插入行中的列。
  - **参数**: 
    - `columnIndex`: (1,2,...)
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **updateInt(String columnLabel, int x)**
  - **功能**: 更新当前行或插入行中的列。
  - **参数**: 
    - `columnLabel`: 列标签
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **updateLong(int columnIndex, long x)**
  - **功能**: 更新当前行或插入行中的列。
  - **参数**: 
    - `columnIndex`: (1,2,...)
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **updateLong(String columnLabel, long x)**
  - **功能**: 更新当前行或插入行中的列。
  - **参数**: 
    - `columnLabel`: 列标签
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **updateFloat(int columnIndex, float x)**
  - **功能**: 更新当前行或插入行中的列。
  - **参数**: 
    - `columnIndex`: (1,2,...)
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **updateFloat(String columnLabel, float x)**
  - **功能**: 更新当前行或插入行中的列。
  - **参数**: 
    - `columnLabel`: 列标签
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **updateDouble(int columnIndex, double x)**
  - **功能**: 更新当前行或插入行中的列。
  - **参数**: 
    - `columnIndex`: (1,2,...)
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

- **updateDouble(String columnLabel, double x)**
  - **功能**: 更新当前行或插入行中的列。
  - **参数**: 
    - `columnLabel`: 列标签
    - `x`: 值
  - **返回值**: void
  - **异常**: `SQLException`

**Section sources**
- [JdbcResultSet.java](file://lealone-client/src/main/java/com/lealone/client/jdbc/JdbcResultSet.java#L1-L3668)

### JdbcDatabaseMetaData

`JdbcDatabaseMetaData`表示数据库的元数据，实现了`java.sql.DatabaseMetaData`接口。

**方法**

- **getDriverMajorVersion()**
  - **功能**: 返回此驱动程序的主版本。
  - **返回值**: 主版本号
  - **异常**: 无

- **getDriverMinorVersion()**
  - **功能**: 返回此驱动程序的次版本。
  - **返回值**: 次版本号
  - **异常**: 无

- **getDatabaseProductName()**
  - **功能**: 获取数据库产品名称。
  - **返回值**: 产品名称 ("Lealone")
  - **异常**: 无

- **getDatabaseProductVersion()**
  - **功能**: 获取数据库的产品版本。
  - **返回值**: 产品版本
  - **异常**: 无

- **getDriverName()**
  - **功能**: 获取JDBC驱动程序的名称。
  - **返回值**: 驱动程序名称 ("Lealone JDBC Driver")
  - **异常**: 无

- **getDriverVersion()**
  - **功能**: 获取驱动程序的版本号。格式为[主版本].[次版本]。
  - **返回值**: 版本号
  - **异常**: 无

- **getTables(String catalogPattern, String schemaPattern, String tableNamePattern, String[] types)**
  - **功能**: 获取数据库中的表列表。结果集按TABLE_TYPE, TABLE_SCHEM, 和 TABLE_NAME排序。
  - **参数**: 
    - `catalogPattern`: null（获取所有对象）或目录名
    - `schemaPattern`: null（获取所有对象）或模式名（未加引号的名称为大写）
    - `tableNamePattern`: null（获取所有对象）或表名（未加引号的名称为大写）
    - `types`: null或表类型列表
  - **返回值**: 列表
  - **异常**: `SQLException`

- **getColumns(String catalogPattern, String schemaPattern, String tableNamePattern, String columnNamePattern)**
  - **功能**: 获取列列表。结果集按TABLE_SCHEM, TABLE_NAME, 和 ORDINAL_POSITION排序。
  - **参数**: 
    - `catalogPattern`: null（获取所有对象）或目录名
    - `schemaPattern`: null（获取所有对象）或模式名（未加引号的名称为大写）
    - `tableNamePattern`: null（获取所有对象）或表名（未加引号的名称为大写）
    - `columnNamePattern`: null（获取所有对象）或列名（未加引号的名称为大写）
  - **返回值**: 列表
  - **异常**: `SQLException`

- **getIndexInfo(String catalogPattern, String schemaPattern, String tableName, boolean unique, boolean approximate)**
  - **功能**: 获取此数据库的索引列表。主键索引（如果存在）也列出，名称为PRIMARY_KEY。结果集按NON_UNIQUE ('false'优先), TYPE, TABLE_SCHEM, INDEX_NAME, 和 ORDINAL_POSITION排序。
  - **参数**: 
    - `catalogPattern`: null或目录名
    - `schemaPattern`: null（获取所有对象）或模式名（未加引号的名称为大写）
    - `tableName`: 表名（必须指定）
    - `unique`: 仅唯一索引
    - `approximate`: 被忽略
  - **返回值**: 索引和列列表
  - **异常**: `SQLException`

- **getPrimaryKeys(String catalogPattern, String schemaPattern, String tableName)**
  - **功能**: 获取表的主键列。结果集按TABLE_SCHEM和COLUMN_NAME排序（而不是KEY_SEQ）。
  - **参数**: 
    - `catalogPattern`: null或目录名
    - `schemaPattern`: null（获取所有对象）或模式名（未加引号的名称为大写）
    - `tableName`: 表名（必须指定）
  - **返回值**: 主键列列表
  - **异常**: `SQLException`

- **allProceduresAreCallable()**
  - **功能**: 检查所有过程是否可调用。
  - **返回值**: true
  - **异常**: 无

- **allTablesAreSelectable()**
  - **功能**: 检查是否可能查询`getTables`返回的所有表。
  - **返回值**: true
  - **异常**: 无

- **getURL()**
  - **功能**: 返回此连接的数据库URL。
  - **返回值**: URL
  - **异常**: `SQLException`

- **getUserName()**
  - **功能**: 返回传递给`DriverManager.getConnection(url, user, password)`的用户名。
  - **返回值**: 用户名
  - **异常**: `SQLException`

- **isReadOnly()**
  - **功能**: 返回`Connection.isReadOnly()`的相同结果。
  - **返回值**: 如果只读优化开启则返回true
  - **异常**: `SQLException`

- **nullsAreSortedHigh()**
  - **功能**: 检查NULL是否排序在高位（比任何非null值都大）。
  - **返回值**: 默认为false；如果系统属性lealone.sortNullsHigh设置为true则为true
  - **异常**: 无

- **nullsAreSortedLow()**
  - **功能**: 检查NULL是否排序在低位（比任何非null值都小）。
  - **返回值**: 默认为true；如果系统属性lealone.sortNullsHigh设置为true则为false
  - **异常**: 无

- **nullsAreSortedAtStart()**
  - **功能**: 检查NULL是否排序在开头（无论使用ASC还是DESC）。
  - **返回值**: false
  - **异常**: 无

- **nullsAreSortedAtEnd()**
  - **功能**: 检查NULL是否排序在末尾（无论使用ASC还是DESC）。
  - **返回值**: false
  - **异常**: 无

- **getConnection()**
  - **功能**: 返回创建此对象的连接。
  - **返回值**: 连接
  - **异常**: 无

- **getProcedures(String catalogPattern, String schemaPattern, String procedureNamePattern)**
  - **功能**: 获取过程列表。结果集按PROCEDURE_SCHEM, PROCEDURE_NAME, 和 NUM_INPUT_PARAMS排序。可能存在多个同名过程，每个有不同的输入参数数量。
  - **参数**: 
    - `catalogPattern`: null或目录名
    - `schemaPattern`: null（获取所有对象）或模式名（未加引号的名称为大写）
    - `procedureNamePattern`: 过程名模式
  - **返回值**: 过程
  - **异常**: `SQLException`

- **getProcedureColumns(String catalogPattern, String schemaPattern, String procedureNamePattern, String columnNamePattern)**
  - **功能**: 获取过程列列表。结果集按PROCEDURE_SCHEM, PROCEDURE_NAME, NUM_INPUT_PARAMS, 和 POS排序。可能存在多个同名过程，每个有不同的输入参数数量。
  - **参数**: 
    - `catalogPattern`: null或目录名
    - `schemaPattern`: null（获取所有对象）或模式名（未加引号的名称为大写）
    - `procedureNamePattern`: 过程名模式
    - `columnNamePattern`: 过程名模式
  - **返回值**: 过程列
  - **异常**: `SQLException`

- **getSchemas()**
  - **功能**: 获取模式列表。结果集按TABLE_SCHEM排序。
  - **返回值**: 模式列表
  - **异常**: `SQLException`

- **getCatalogs()**
  - **功能**: 获取目录列表。结果集按TABLE_CAT排序。
  - **返回值**: 目录列表
  - **异常**: `SQLException`

- **getTableTypes()**
  - **功能**: 获取表类型列表。此调用返回包含三条记录的结果集："SYSTEM TABLE", "TABLE", 和 "VIEW"。结果集按TABLE_TYPE排序。
  - **返回值**: 表类型
  - **异常**: `SQLException`

- **getColumnPrivileges(String catalogPattern, String schemaPattern, String table, String columnNamePattern)**
  - **功能**: 获取列权限列表。结果集按COLUMN_NAME和PRIVILEGE排序。
  - **参数**: 
    - `catalogPattern`: null（获取所有对象）或目录名
    - `schemaPattern`: null（获取所有对象）或模式名（未加引号的名称为大写）
    - `table`: 表名（未加引号的名称为大写）
    - `columnNamePattern`: null（获取所有对象）或列名（未加引号的名称为大写）
  - **返回值**: 权限列表
  - **异常**: `SQLException`

- **getTablePrivileges(String catalogPattern, String schemaPattern, String tableNamePattern)**
  - **功能**: 获取表权限列表。结果集按TABLE_SCHEM, TABLE_NAME, 和 PRIVILEGE排序。
  - **参数**: 
    - `catalogPattern`: null（获取所有对象）或目录名
    - `schemaPattern`: null（获取所有对象）或模式名（未加引号的名称为大写）
    - `tableNamePattern`: null（获取所有对象）或表名（未加引号的名称为大写）
  - **返回值**: 权限列表
  - **异常**: `SQLException`

**Section sources**
- [JdbcDatabaseMetaData.java](file://lealone-client/src/main/java/com/lealone/client/jdbc/JdbcDatabaseMetaData.java#L1-L2945)

### JdbcCallableStatement

`JdbcCallableStatement`表示一个可调用语句，继承自`JdbcPreparedStatement`并实现了`java.sql.CallableStatement`接口。

**方法**

- **executeUpdate()**
  - **功能**: 执行语句（insert, update, delete, create, drop）并返回更新计数。如果此语句存在另一个结果集，即使此语句失败，它也将被关闭。
  - **返回值**: 更新计数（insert, update或delete影响的行数，如果无行或语句为create, drop, commit或rollback则为0）
  - **异常**: `SQLException`

- **registerOutParameter(int parameterIndex, int sqlType)**
  - **功能**: 注册给定的OUT参数。
  - **参数**: 
    - `parameterIndex`: 参数索引 (1, 2, ...)
    - `sqlType`: 数据类型 (Types.x) - 被忽略
  - **返回值**: void
  - **异常**: `SQLException`

- **registerOutParameter(int parameterIndex, int sqlType, String typeName)**
  - **功能**: 注册给定的OUT参数。
  - **参数**: 
    - `parameterIndex`: 参数索引 (1, 2, ...)
    - `sqlType`: 数据类型 (Types.x) - 被忽略
    - `typeName`: SQL类型名 - 被忽略
  - **返回值**: void
  - **异常**: `SQLException`

- **registerOutParameter(int parameterIndex, int sqlType, int scale)**
  - **功能**: 注册给定的OUT参数。
  - **参数**: 
    - `parameterIndex`: 参数索引 (1, 2, ...)
    - `sqlType`: 数据类型 (Types.x)
    - `scale`: 被忽略
  - **返回值**: void
  - **异常**: `SQLException`

- **registerOutParameter(String parameterName, int sqlType, String typeName)**
  - **功能**: 注册给定的OUT参数。
  - **参数**: 
    - `parameterName`: 参数名
    - `sqlType`: 数据类型 (Types.x) - 被忽略
    - `typeName`: SQL类型名 - 被忽略
  - **返回值**: void
  - **异常**: `SQLException`

- **registerOutParameter(String parameterName, int sqlType, int scale)**
  - **功能**: 注册给定的OUT参数。
  - **参数**: 
    - `parameterName`: 参数名
    - `sqlType`: 数据类型 (Types.x) - 被忽略
    - `scale`: 被忽略
  - **返回值**: void
  - **异常**: `SQLException`

- **registerOutParameter(String parameterName, int sqlType)**
  - **功能**: 注册给定的OUT参数。
  - **参数**: 
    - `parameterName`: 参数名
    - `sqlType`: 数据类型 (Types.x) - 被忽略
  - **返回值**: void
  - **异常**: `SQLException`

- **wasNull()**
  - **功能**: 返回上次访问的列是否为null。
  - **返回值**: 如果上次访问的列为null则返回true
  - **异常**: `SQLException`

- **getURL(int parameterIndex)**
  - **功能**: [不支持]
  - **参数**: 
    - `parameterIndex`: (1, 2, ...)
  - **返回值**: 抛出`SQLException`
  - **异常**: `SQLException`

- **getString(int parameterIndex)**
  - **功能**: 返回指定列的值作为字符串。
  - **参数**: 
    - `parameterIndex`: (1,2,...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getBoolean(int parameterIndex)**
  - **功能**: 返回指定列的值作为布尔值。
  - **参数**: 
    - `parameterIndex`: (1,2,...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getByte(int parameterIndex)**
  - **功能**: 返回指定列的值作为字节。
  - **参数**: 
    - `parameterIndex`: (1,2,...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getShort(int parameterIndex)**
  - **功能**: 返回指定列的值作为短整型。
  - **参数**: 
    - `parameterIndex`: (1,2,...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getInt(int parameterIndex)**
  - **功能**: 返回指定列的值作为整数。
  - **参数**: 
    - `parameterIndex`: (1, 2, ...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getLong(int parameterIndex)**
  - **功能**: 返回指定列的值作为长整型。
  - **参数**: 
    - `parameterIndex`: (1, 2, ...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getFloat(int parameterIndex)**
  - **功能**: 返回指定列的值作为浮点数。
  - **参数**: 
    - `parameterIndex`: (1, 2, ...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getDouble(int parameterIndex)**
  - **功能**: 返回指定列的值作为双精度浮点数。
  - **参数**: 
    - `parameterIndex`: (1, 2, ...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getBigDecimal(int parameterIndex, int scale)**
  - **功能**: 返回指定列的值作为BigDecimal。
  - **参数**: 
    - `parameterIndex`: (1, 2, ...)
    - `scale`: 被忽略
  - **返回值**: 值
  - **异常**: `SQLException`

- **getBytes(int parameterIndex)**
  - **功能**: 返回指定列的值作为字节数组。
  - **参数**: 
    - `parameterIndex`: (1, 2, ...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getDate(int parameterIndex)**
  - **功能**: 返回指定列的值作为java.sql.Date。
  - **参数**: 
    - `parameterIndex`: (1, 2, ...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getTime(int parameterIndex)**
  - **功能**: 返回指定列的值作为java.sql.Time。
  - **参数**: 
    - `parameterIndex`: (1, 2, ...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getTimestamp(int parameterIndex)**
  - **功能**: 返回指定列的值作为java.sql.Timestamp。
  - **参数**: 
    - `parameterIndex`: (1, 2, ...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getObject(int parameterIndex)**
  - **功能**: 将列值作为Java对象返回。数据在客户端反序列化为Java对象。
  - **参数**: 
    - `parameterIndex`: (1, 2, ...)
  - **返回值**: 值或null
  - **异常**: `SQLException`

- **getBigDecimal(int parameterIndex)**
  - **功能**: 返回指定列的值作为BigDecimal。
  - **参数**: 
    - `parameterIndex`: (1, 2, ...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getObject(int parameterIndex, Map<String, Class<?>> map)**
  - **功能**: [不支持] 使用指定的类型映射获取列为对象。
  - **参数**: 
    - `parameterIndex`: (1, 2, ...)
    - `map`: 映射
  - **返回值**: 抛出`SQLException`
  - **异常**: `SQLException`

- **getRef(int parameterIndex)**
  - **功能**: [不支持] 获取列为引用。
  - **参数**: 
    - `parameterIndex`: (1, 2, ...)
  - **返回值**: 抛出`SQLException`
  - **异常**: `SQLException`

- **getBlob(int parameterIndex)**
  - **功能**: 返回指定列的值作为Blob。
  - **参数**: 
    - `parameterIndex`: (1, 2, ...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getClob(int parameterIndex)**
  - **功能**: 返回指定列的值作为Clob。
  - **参数**: 
    - `parameterIndex`: (1, 2, ...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getArray(int parameterIndex)**
  - **功能**: 返回指定列的值作为Array。
  - **参数**: 
    - `parameterIndex`: (1, 2, ...)
  - **返回值**: 值
  - **异常**: `SQLException`

- **getDate(int parameterIndex, Calendar cal)**
  - **功能**: 使用指定的时区返回指定列的值作为java.sql.Date。
  - **参数**: 
    - `parameterIndex`: (1, 2, ...)
    - `cal`: 日历
  - **返回值**: 值
  - **异常**: `SQLException`

- **getTime(int parameterIndex, Calendar cal)**
  - **功能**: 使用指定的时区返回指定列的值作为java.sql.Time。
  - **参数**: 
    - `parameterIndex`: (1, 2, ...)
    - `cal`: 日历
  - **返回值**: 值
  - **异常**: `SQLException`

- **getTimestamp(int parameterIndex, Calendar cal)**
  - **功能**: 使用指定的时区返回指定列的值作为java.sql.Timestamp。
  - **参数**: 
    - `parameterIndex`: (1, 2, ...)
    - `cal`: 日历
  - **返回值**: 值
  - **异常**: `SQLException`

- **getURL(String parameterName)**
  - **功能**: [不支持]
  - **参数**: 
    - `parameterName`: 参数名
  - **返回值**: 抛出`SQLException`
  - **异常**: `SQLException`

- **getTimestamp(String parameterName, Calendar cal)**
  - **功能**: 使用指定的时区返回指定列的值作为java.sql.Timestamp。
  - **参数**: 
    - `parameterName`: 参数名
    - `cal`: 日历
  - **返回值**: 值
  - **异常**: `SQLException`

- **getTime(String parameterName, Calendar cal)**
  - **功能**: 使用指定的时区返回指定列的值作为java.sql.Time。
  - **参数**: 
    - `parameterName`: 参数名
    - `cal`: 日历
  - **返回值**: 值
  - **异常**: `SQLException`

- **getDate(String parameterName, Calendar cal)**
  - **功能**: 使用指定的时区返回指定列的值作为java.sql.Date。
  - **参数**: 
    - `parameterName`: 参数名
    - `cal`: 日历
  - **返回值**: 值
  - **异常**: `SQLException`

- **getArray(String parameterName)**
  - **功能**: 返回指定列的值作为Array。
  - **参数**: 
    - `parameterName`: 参数名
  - **返回值**: 值
  - **异常**: `SQLException`

- **getClob(String parameterName)**
  - **功能**: 返回指定列的值作为Clob。
  - **参数**: 
    - `parameterName`: 参数名
  - **返回值**: 值
  - **异常**: `SQLException`

- **getBlob(String parameterName)**
  - **功能**: 返回指定列的值作为Blob。
  - **参数**: 
    - `parameterName`: 参数名
  - **返回值**: 值
  - **异常**: `SQLException`

- **getRef(String parameterName)**
  - **功能**: [不支持] 获取列为引用。
  - **参数**: 
    - `parameterName`: 参数名
  - **返回值**: 抛出`SQLException`
  - **异常**: `SQLException`

- **getObject(String parameterName, Map<String, Class<?>> map)**
  - **功能**: [不支持] 使用指定的类型映射获取列为对象。
  - **参数**: 
    - `parameterName`: 参数名
    - `map`: 映射
  - **返回值**: 抛出`SQLException`
  - **异常**: `SQLException`

- **getBigDecimal(String parameterName)**
  - **功能**: 返回指定列的值作为BigDecimal。
  - **参数**: 
    - `parameterName`: 参数名
  - **返回值**: 值
  - **异常**: `SQLException`

- **getObject(String parameterName)**
  - **功能**: 将列值作为Java对象返回。数据在客户端反序列化为Java对象。
  - **参数**: 
    - `parameterName`: 参数名
  - **返回值**: 值或null
  - **异常**: `SQLException`

- **getTimestamp(String parameterName)**
  - **功能**: 返回指定列的值作为java.sql.Timestamp。
  - **参数**: 
    - `parameterName`: 参数名
  - **返回值**: 值
  - **异常**: `SQLException`

- **getTime(String parameterName)**
  - **功能**: 返回指定列的值作为java.sql.Time。
  - **参数**: 
    - `parameterName`: 参数名
  - **返回值**: 值
  - **异常**: `SQLException`

- **getDate(String parameterName)**
  - **功能**: 返回指定列的值作为java.sql.Date。
  - **参数**: 
    - `parameterName`: 参数名
  - **返回值**: 值
  - **异常**: `SQLException`

- **getBytes(String parameterName)**
  - **功能**: 返回指定列的值作为字节数组。
  - **参数**: 
    - `parameterName`: 参数名
  - **返回值**: 值
  - **异常**: `SQLException`

- **getDouble(String parameterName)**
  - **功能**: 返回指定列的值作为双精度浮点数。
  - **参数**: 
    - `parameterName`: 参数名
  - **返回值**: 值
  - **异常**: `SQLException`

- **getFloat(String parameterName)**
  - **功能**: 返回指定列的值作为浮点数。
  - **参数**: 
    - `parameterName`: 参数名
  - **返回值**: 值
  - **异常**: `SQLException`

- **getLong(String parameterName)**
  - **功能**: 返回指定列的值作为长整型。
  - **参数**: 
    - `parameterName`: 参数名
  - **返回值**: 值
  - **异常**: `SQLException`

- **getInt(String parameterName)**
  - **功能**: 返回指定列的值作为整数。
  - **参数**: 
    - `parameterName`: 参数名
  - **返回值**: 值
  - **异常**: `SQLException`

- **getShort(String parameterName)**
  - **功能**: 返回指定列的值作为短整型。
  - **参数**: 
    - `parameterName`: 参数名
  - **返回值**: 值
  - **异常**: `SQLException`

- **getByte(String parameterName)**
  - **功能**: 返回指定列的值作为字节。
  - **参数**: 
    - `parameterName`: 参数名
  - **返回值**: 值
  - **异常**: `SQLException`

- **getBoolean(String parameterName)**
  - **功能**: 返回指定列的值作为布尔值。
  - **参数**: 
    - `parameterName`: 参数名
  - **返回值**: 值
  - **异常**: `SQLException`

- **getString(String parameterName)**
  - **功能**: 返回指定列的值作为字符串。
  - **参数**: 
    - `parameterName`: 参数名
  - **返回值**: 值
  - **异常**: `SQLException`

- **getRowId(int parameterIndex)**
  - **功能**: [不支持] 返回指定列的值作为行ID。
  - **参数**: 
    - `parameterIndex`: (1, 2, ...)
  - **返回值**: 抛出`SQLException`
  - **异常**: `SQLException`

- **getRowId(String parameterName)**
  - **功能**: [不支持] 返回指定列的值作为行ID。
  - **参数**: 
    - `parameterName`: 参数名
  - **返回值**: 抛出`SQLException`
  - **异常**: `SQLException`

**Section sources**
- [JdbcCallableStatement.java](file://lealone-client/src/main/java/com/lealone/client/jdbc/JdbcCallableStatement.java#L1-L1615)

## 核心Java API

本节详细记录Lealone的核心Java API，特别是数据库实例的公共接口。

### Database

`Database`是每个打开的数据库的对象，是Lealone数据库系统的核心类。

**方法**

- **getShortName()**
  - **功能**: 获取数据库的短名称。
  - **返回值**: 名称
  - **异常**: 无

- **getSettings()**
  - **功能**: 获取数据库设置。
  - **返回值**: `DbSettings`对象
  - **异常**: 无

- **setDbSetting(ServerSession session, DbSetting key, String value)**
  - **功能**: 设置数据库设置。
  - **参数**: 
    - `session`: 会话
    - `key`: 设置键
    - `value`: 值
  - **返回值**: 如果设置已更改则返回true
  - **异常**: 无

- **updateDbSettings(ServerSession session, Map<String, String> newSettings)**
  - **功能**: 更新数据库设置。
  - **参数**: 
    - `session`: 会话
    - `newSettings`: 新设置
  - **返回值**: 如果设置已更改则返回true
  - **异常**: 无

- **isPersistent()**
  - **功能**: 检查数据库是否为持久化。
  - **返回值**: 如果是持久化则返回true
  - **异常**: 无

- **getSQLEngine()**
  - **功能**: 获取SQL引擎。
  - **返回值**: `SQLEngine`对象
  - **异常**: 无

- **getTransactionEngine()**
  - **功能**: 获取事务引擎。
  - **返回值**: `TransactionEngine`对象
  - **异常**: 无

- **createParser(Session session)**
  - **功能**: 创建SQL解析器。
  - **参数**: 
    - `session`: 会话
  - **返回值**: `SQLParser`对象
  - **异常**: 无

- **quoteIdentifier(String identifier)**
  - **功能**: 引用标识符。
  - **参数**: 
    - `identifier`: 标识符
  - **返回值**: 引用的标识符
  - **异常**: 无

- **getDefaultStorageEngineName()**
  - **功能**: 获取默认存储引擎名称。
  - **返回值**: 存储引擎名称
  - **异常**: 无

- **getParameters()**
  - **功能**: 获取参数。
  - **返回值**: 参数映射
  - **异常**: 无

- **setRunMode(RunMode runMode)**
  - **功能**: 设置运行模式。
  - **参数**: 
    - `runMode`: 运行模式
  - **返回值**: void
  - **异常**: 无

- **getRunMode()**
  - **功能**: 获取运行模式。
  - **返回值**: 运行模式
  - **异常**: 无

- **copy()**
  - **功能**: 复制数据库。
  - **返回值**: `Database`对象
  - **异常**: 无

- **copy(boolean init)**
  - **功能**: 复制数据库。
  - **参数**: 
    - `init`: 是否初始化
  - **返回值**: `Database`对象
  - **异常**: 无

- **isInitialized()**
  - **功能**: 检查数据库是否已初始化。
  - **返回值**: 如果已初始化则返回true
  - **异常**: 无

- **init()**
  - **功能**: 初始化数据库。
  - **返回值**: void
  - **异常**: 无

- **areEqual(Value a, Value b)**
  - **功能**: 检查两个值是否相等（使用当前比较模式）。
  - **参数**: 
    - `a`: 第一个值
    - `b`: 第二个值
  - **返回值**: 如果两个对象相等则返回true
  - **异常**: 无

- **compare(Value a, Value b)**
  - **功能**: 使用当前比较模式比较两个值。值可以是不同类型。
  - **参数**: 
    - `a`: 第一个值
    - `b`: 第二个值
  - **返回值**: 如果两个值相等则返回0，如果第一个值较小则返回-1，否则返回1
  - **异常**: 无

- **compareTypeSafe(Value a, Value b)**
  - **功能**: 使用当前比较模式比较两个值。值必须是相同类型。
  - **参数**: 
    - `a`: 第一个值
    - `b`: 第二个值
  - **返回值**: 如果两个值相等则返回0，如果第一个值较小则返回-1，否则返回1
  - **异常**: 无

- **getModificationDataId()**
  - **功能**: 获取数据修改ID。
  - **返回值**: 修改ID
  - **异常**: 无

- **getNextModificationDataId()**
  - **功能**: 获取下一个数据修改ID。
  - **返回值**: 修改ID
  - **异常**: 无

- **getModificationMetaId()**
  - **功能**: 获取元数据修改ID。
  - **返回值**: 修改ID
  - **异常**: 无

- **getNextModificationMetaId()**
  - **功能**: 获取下一个元数据修改ID。
  - **返回值**: 修改ID
  - **异常**: 无

- **getTrace(TraceModuleType traceModuleType)**
  - **功能**: 获取给定模块类型的跟踪对象。
  - **参数**: 
    - `traceModuleType`: 模块类型
  - **返回值**: 跟踪对象
  - **异常**: 无

- **validateFilePasswordHash(String testCipher, byte[] testHash)**
  - **功能**: 检查文件密码哈希是否正确。
  - **参数**: 
    - `testCipher`: 测试密码算法
    - `testHash`: 哈希码
  - **返回值**: 如果密码算法和密码匹配则返回true
  - **异常**: 无

- **allocateObjectId()**
  - **功能**: 分配一个新的对象ID。
  - **返回值**: ID
  - **异常**: 无

- **clearObjectId(int id)**
  - **功能**: 清除对象ID。
  - **参数**: 
    - `id`: ID
  - **返回值**: void
  - **异常**: 无

- **isObjectIdEnabled(int id)**
  - **功能**: 检查对象ID是否启用。
  - **参数**: 
    - `id`: ID
  - **返回值**: 如果启用则返回true
  - **异常**: 无

- **getMetaCursor(ServerSession session)**
  - **功能**: 获取元数据游标。
  - **参数**: 
    - `session`: 会话
  - **返回值**: `Cursor`对象
  - **异常**: 无

- **findMeta(ServerSession session, int id)**
  - **功能**: 查找元数据。
  - **参数**: 
    - `session`: 会话
    - `id`: ID
  - **返回值**: `Row`对象
  - **异常**: 无

- **tryLockDbObject(ServerSession session, DbObject obj, int errorCode)**
  - **功能**: 尝试锁定数据库对象。
  - **参数**: 
    - `session`: 会话
    - `obj`: 数据库对象
    - `errorCode`: 错误码
  - **返回值**: `Row`对象，如果无法锁定则返回null
  - **异常**: 无

- **tryAddMeta(ServerSession session, DbObject obj)**
  - **功能**: 尝试添加元数据。
  - **参数**: 
    - `session`: 会话
    - `obj`: 数据库对象
  - **返回值**: void
  - **异常**: 无

- **tryRemoveMeta(ServerSession session, SchemaObject obj, DbObjectLock lock)**
  - **功能**: 尝试移除元数据。
  - **参数**: 
    - `session`: 会话
    - `obj`: 模式对象
    - `lock`: 对象锁
  - **返回值**: void
  - **异常**: 无

**Section sources**
- [Database.java](file://lealone-db/src/main/java/com/lealone/db/Database.java#L1-L2041)

### LealoneDatabase

`LealoneDatabase`是最顶层的数据库，用于管理所有应用创建的数据库。

**方法**

- **getInstance()**
  - **功能**: 获取`LealoneDatabase`实例。
  - **返回值**: `LealoneDatabase`实例
  - **异常**: 无

- **addUnsupportedSchema(String schemaName)**
  - **功能**: 添加不支持的模式。
  - **参数**: 
    - `schemaName`: 模式名
  - **返回值**: void
  - **异常**: 无

- **isUnsupportedSchema(String schemaName)**
  - **功能**: 检查模式是否不支持。
  - **参数**: 
    - `schemaName`: 模式名
  - **返回值**: 如果不支持则返回true
  - **异常**: 无

- **isMe(String dbName)**
  - **功能**: 检查数据库名是否为`LealoneDatabase`。
  - **参数**: 
    - `dbName`: 数据库名
  - **返回值**: 如果是则返回true
  - **异常**: 无

- **createEmbeddedDatabase(String name, ConnectionInfo ci)**
  - **功能**: 创建嵌入式数据库。
  - **参数**: 
    - `name`: 名称
    - `ci`: 连接信息
  - **返回值**: `Database`对象
  - **异常**: 无

- **closeDatabase(String dbName)**
  - **功能**: 关闭数据库。
  - **参数**: 
    - `dbName`: 数据库名
  - **返回值**: void
  - **异常**: 无

- **dropDatabase(String dbName)**
  - **功能**: 删除数据库。
  - **参数**: 
    - `dbName`: 数据库名
  - **返回值**: void
  - **异常**: 无

- **getDatabasesMap()**
  - **功能**: 获取数据库映射。
  - **返回值**: `Map<String, Database>`对象
  - **异常**: 无

- **getDatabases()**
  - **功能**: 获取数据库列表。
  - **返回值**: `List<Database>`对象
  - **异常**: 无

- **findDatabase(String dbName)**
  - **功能**: 查找数据库。
  - **参数**: 
    - `dbName`: 数据库名
  - **返回值**: `Database`对象，如果不存在则返回null
  - **异常**: 无

- **getDatabase(String dbName)**
  - **功能**: 获取数据库。如果数据库不存在，此方法会抛出异常。
  - **参数**: 
    - `dbName`: 数据库名
  - **返回值**: `Database`对象
  - **异常**: `DbException`

- **isClosed(String dbName)**
  - **功能**: 检查数据库是否已关闭。
  - **参数**: 
    - `dbName`: 数据库名
  - **返回值**: 如果已关闭则返回true
  - **异常**: 无

- **copy()**
  - **功能**: 复制数据库。
  - **返回值**: `Database`对象
  - **异常**: 无

- **checkAdminRight(ServerSession session, String stmt)**
  - **功能**: 检查管理员权限。只有管理员连接到`LealoneDatabase`才能执行某些语句，如CREATE/ALTER/DROP DATABASE。
  - **参数**: 
    - `session`: 会话
    - `stmt`: 语句
  - **返回值**: void
  - **异常**: `DbException`

- **isSuperAdmin(ServerSession session)**
  - **功能**: 检查是否为超级管理员。
  - **参数**: 
    - `session`: 会话
  - **返回值**: 如果是超级管理员则返回true
  - **异常**: 无

- **gc(TransactionEngine te)**
  - **功能**: 执行垃圾回收。
  - **参数**: 
    - `te`: 事务引擎
  - **返回值**: void
  - **异常**: 无

**Section sources**
- [LealoneDatabase.java](file://lealone-db/src/main/java/com/lealone/db/LealoneDatabase.java#L1-L204)